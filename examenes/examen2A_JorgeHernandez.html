<!DOCTYPE html>
<html>

<head>
    <title>HEAVEN</title>
</head>

<body>
    <script>
        let mapa = 
        [['*', '', '', '', '', ''],
        ['*', '', '', '', '', ''],
        ['*', '', '', '', '', ''],
        ['*', '', '', '', '', ''],
        ['*', '*', '*', '*', '*', '*']];

        const comprobarCamino = (array, i, j) => {
            // Cuando no me pasen la i y la j las inicializo donde dice el enunciado
            if (i === undefined) {
                i = 0;
            }
            if (j === undefined) {
                j = 0;
            }

            if (i == 0 && j == 0) { // Si la entrada no es un asterisco devuelvo false
                if (array[i][j] != "*"){
                    return false;
                }
            }

            if (i == array.length - 1 && j == array[i].length - 1) { // Si llego a la esquina inferior derecha paro
                if (array[i][j] == "*") { // Si es un asterisco es que escapa y devuelvo true
                    return true;
                } else { // Si no es que no escapa y devuelvo false
                    return false;
                }
            }

            // Miro derecha
            if (j + 1 < array[i].length && array[i][j + 1] == "*") {
                array[i][j] = ""; // Vacio por donde paso para no dar la vuelta
                return comprobarCamino(array, i, j + 1);
            }
            // Miro abajo
            if (i + 1 < array.length && array[i + 1][j] == "*") {
                array[i][j] = ""; // Vacio por donde paso para no dar la vuelta
                return comprobarCamino(array, i + 1, j);
            }
            // Miro arriba
            if (i - 1 >= 0 && array[i - 1][j] == "*") {
                array[i][j] = ""; // Vacio por donde paso para no dar la vuelta
                return comprobarCamino(array, i - 1, j);
            }
            
            // Miro izquierda
            if (j - 1 >= 0 && array[i][j - 1] == "*") {
                array[i][j] = ""; // Vacio por donde paso para no dar la vuelta
                return comprobarCamino(array, i, j - 1);
            }

            // Si llego hasta aqui es que no hay más camino, por lo que devuelvo false
            return false;

        }

        // Hago la función que dice el enunciado para mostrar el resultado y la matriz
        const heaven = (array) => {

            if (comprobarCamino(JSON.parse(JSON.stringify(array)))) { // Compruebo el camino con la función recursiva
                console.log("SEMOS LIBRES");
            } else {
                console.log("mal");
            }
        }

        console.log("Mapa utilizado:");
        console.log(mapa);
        heaven(mapa);
    </script>
</body>

</html>